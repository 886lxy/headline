{"version":3,"file":"js/440.c4976520.js","mappings":"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","sources":["webpack://toutiao-a/./src/views/my/MyView.vue","webpack://toutiao-a/src/views/my/MyView.vue","webpack://toutiao-a/./src/views/my/MyView.vue?6115","webpack://toutiao-a/./src/views/my/MyView.vue?5498","webpack://toutiao-a/./src/api/user.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"my-container\"},[(_vm.$store.state.token)?_c('div',{staticClass:\"loginin\"},[_c('div',{staticClass:\"logintop\"},[_c('van-image',{staticClass:\"img\",attrs:{\"round\":\"\",\"src\":_vm.userinfo.photo}}),_c('div',{staticClass:\"loginname\"},[_vm._v(_vm._s(_vm.userinfo.name))]),_c('van-button',{staticClass:\"loginbtn\",attrs:{\"to\":\"/useredit\",\"size\":\"mini\",\"type\":\"primary\"}},[_vm._v(\" 编辑资料 \")])],1),_c('div',{staticClass:\"datalist\"},[_c('div',{staticClass:\"item\"},[_c('div',[_vm._v(_vm._s(_vm.userinfo.art_count))]),_c('div',[_vm._v(\"头条\")])]),_c('div',{staticClass:\"item\"},[_c('div',[_vm._v(_vm._s(_vm.userinfo.follow_count))]),_c('div',[_vm._v(\"关注\")])]),_c('div',{staticClass:\"item\"},[_c('div',[_vm._v(_vm._s(_vm.userinfo.fans_count))]),_c('div',[_vm._v(\"粉丝\")])]),_c('div',{staticClass:\"item\"},[_c('div',[_vm._v(_vm._s(_vm.userinfo.like_count))]),_c('div',[_vm._v(\"获赞\")])])])]):_c('div',{staticClass:\"outlogin\",on:{\"click\":_vm.loginin}},[_c('img',{attrs:{\"src\":require(\"@/assets/img/mobile.png\"),\"alt\":\"\"}}),_c('div',{staticClass:\"text\"},[_vm._v(\"登录/注册\")])])])]),_c('van-grid',{attrs:{\"column-num\":2}},[_c('van-grid-item',{staticClass:\"columnitem\",scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('span',{staticClass:\"toutiao toutiao-shoucang\"})]},proxy:true},{key:\"text\",fn:function(){return [_c('span',{staticClass:\"text\"},[_vm._v(\"收藏\")])]},proxy:true}])}),_c('van-grid-item',{staticClass:\"columnitem\",scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('span',{staticClass:\"toutiao toutiao-lishi\"})]},proxy:true},{key:\"text\",fn:function(){return [_c('span',{staticClass:\"text\"},[_vm._v(\"历史\")])]},proxy:true}])})],1),_c('div',{staticClass:\"line\"}),_c('van-cell',{attrs:{\"title\":\"消息通知\",\"is-link\":\"\"}}),_c('van-cell',{attrs:{\"title\":\"小智同学\",\"is-link\":\"\",\"to\":\"/chatview\"}}),_c('div',{staticClass:\"line\"}),(_vm.$store.state.token)?_c('div',{staticClass:\"loginout\",on:{\"click\":_vm.loginout}},[_vm._v(\" 退出登录 \")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"header\">\n      <div class=\"my-container\">\n        <!-- 登录未登录也要根据缓存里的token来判断 -->\n        <!-- 已登录的dom结构 -->\n        <div class=\"loginin\" v-if=\"$store.state.token\">\n          <!-- 用户头像 -->\n          <div class=\"logintop\">\n            <van-image class=\"img\" round :src=\"userinfo.photo\" />\n            <div class=\"loginname\">{{ userinfo.name }}</div>\n            <van-button\n              to=\"/useredit\"\n              class=\"loginbtn\"\n              size=\"mini\"\n              type=\"primary\"\n            >\n              编辑资料\n            </van-button>\n          </div>\n          <!-- 数据统计 -->\n          <div class=\"datalist\">\n            <div class=\"item\">\n              <div>{{ userinfo.art_count }}</div>\n              <div>头条</div>\n            </div>\n            <div class=\"item\">\n              <div>{{ userinfo.follow_count }}</div>\n              <div>关注</div>\n            </div>\n            <div class=\"item\">\n              <div>{{ userinfo.fans_count }}</div>\n              <div>粉丝</div>\n            </div>\n            <div class=\"item\">\n              <div>{{ userinfo.like_count }}</div>\n              <div>获赞</div>\n            </div>\n          </div>\n        </div>\n        <!-- 未登录的dom结构 -->\n        <div class=\"outlogin\" v-else @click=\"loginin\">\n          <img src=\"@/assets/img/mobile.png\" alt=\"\" />\n          <div class=\"text\">登录/注册</div>\n        </div>\n      </div>\n    </div>\n    <van-grid :column-num=\"2\">\n      <!-- 刚才看到图标里面明明有收藏和历史为什么没用 -->\n      <!-- 1、为了教学，让大家更好的练习插槽的使用 -->\n      <!-- 2、黑马头条一开始录制这个课程的时候，vant组件还不支持插槽 -->\n      <!-- 实际工作中 -->\n      <!-- 1、如果使用的第三方库有想要的图标，直接拿来用 -->\n      <!-- 2、如果第三方库没有图标，那只能用UI小姐姐给的 -->\n      <van-grid-item class=\"columnitem\">\n        <template #icon>\n          <span class=\"toutiao toutiao-shoucang\"></span>\n        </template>\n        <template #text>\n          <span class=\"text\">收藏</span>\n        </template>\n      </van-grid-item>\n      <van-grid-item class=\"columnitem\">\n        <template #icon>\n          <span class=\"toutiao toutiao-lishi\"></span>\n        </template>\n        <template #text>\n          <span class=\"text\">历史</span>\n        </template>\n      </van-grid-item>\n    </van-grid>\n    <div class=\"line\"></div>\n    <van-cell title=\"消息通知\" is-link />\n    <van-cell title=\"小智同学\" is-link to=\"/chatview\" />\n    <div class=\"line\"></div>\n    <!-- 思考：什么时候才显示退出登录 -->\n    <!-- 目标：有了token才显示 -->\n    <div class=\"loginout\" v-if=\"$store.state.token\" @click=\"loginout\">\n      退出登录\n    </div>\n  </div>\n</template>\n<script>\nimport { removeItem } from \"@/utils/storage\";\nimport { getUserApi } from \"@/api/user\";\nexport default {\n  data() {\n    return {\n      // loginstate: getItem(\"token\"),\n      userinfo: {},\n    };\n  },\n  //created或者mounted\n  async created() {\n    if (this.$store.state.token) {\n      try {\n        let { data } = await getUserApi();\n        this.userinfo = data.data;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  },\n  methods: {\n    loginin() {\n      //编程式导航\n      this.$router.push(\"/login\");\n    },\n    // 登出方法\n    // 细节：加上二次确认框\n    // 原因：因为有时候用户并不是真的想退出，有可能是误触\n    // 如果不加二次确认框：点击登出真就退出了，继续浏览，还要重新登录（麻烦不麻烦？）\n    // 解决：加上二次确认框\n    loginout() {\n      //思考：我已经全局引入vant，为什么还不能用？\n      //使用：this.$dialog\n      this.$dialog\n        .confirm({\n          title: \"确认退出吗？\",\n        })\n        .then(() => {\n          console.log(\"点击了确认\");\n          // on confirm\n          removeItem();\n          //思考：\n          // 1、我点击确认退出登录，为什么页面没变化？\n          // 2、浏览器缓存的数据，是响应性的吗？\n          // 3、是不是要监听缓存的变化，以我们目前的学的知识，很难办到！\n          //目标：退出之后，页面应该显示未登录的状态\n          //解决：使用Vuex\n        })\n        .catch(() => {\n          console.log(\"点击了取消\");\n          // on cancel\n        });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.line {\n  height: 10px;\n  width: 100%;\n}\n.header {\n  height: 390px;\n  width: 100%;\n  background: url(\"../../assets/img/banner.png\");\n  .outlogin {\n    text-align: center;\n    img {\n      width: 132px;\n      height: 132px;\n      margin: 113px 0px 15px;\n    }\n    .text {\n      font-size: 28px;\n      color: #fff;\n    }\n  }\n  .loginin {\n    overflow: hidden;\n    line-height: 132px;\n    .logintop {\n      margin-top: 80px;\n      padding: 0px 32px;\n      overflow: hidden;\n      .img {\n        width: 132px;\n        height: 132px;\n        border: 4px solid #fff;\n        float: left;\n      }\n      .loginname {\n        font-size: 30px;\n        color: #fff;\n        float: left;\n        margin-left: 22px;\n      }\n      .loginbtn {\n        width: 116px;\n        height: 33px;\n        background-color: #ffffff;\n        border-radius: 16px;\n        color: #666666;\n        font-size: 20px;\n        float: right;\n        margin-top: 50px;\n      }\n    }\n\n    .datalist {\n      padding: 0px 32px;\n      .item {\n        width: 25%;\n        float: left;\n        color: #fff;\n        text-align: center;\n        div:first-child {\n          font-size: 36px;\n          line-height: 36px;\n          margin: 55px 0px 18px;\n        }\n        div:last-child {\n          font-size: 23px;\n          line-height: 24px;\n        }\n      }\n    }\n  }\n}\n.columnitem {\n  .toutiao {\n    font-size: 45px;\n  }\n  .text {\n    font-size: 28px;\n    color: #333333;\n    margin-top: 16px;\n  }\n}\n.cel {\n  margin: 9px 0px;\n}\n.loginout {\n  height: 105px;\n  font-size: 30px;\n  letter-spacing: 2px;\n  color: #d86262;\n  text-align: center;\n  background: #fff;\n  line-height: 105px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MyView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MyView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MyView.vue?vue&type=template&id=0d106fb2&scoped=true&\"\nimport script from \"./MyView.vue?vue&type=script&lang=js&\"\nexport * from \"./MyView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MyView.vue?vue&type=style&index=0&id=0d106fb2&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d106fb2\",\n  null\n  \n)\n\nexport default component.exports","import request from \"@/utils/request\";\n// import store from \"@/store\";\n//获取用户基本资料\nexport const getUserApi = () =>\n  request({\n    url: \"/v1_0/user\",\n    method: \"get\",\n    //参数是header请求头，axios单独的请求配置\n    //所以不能用data或者params\n    // headers: {\n    //   Authorization: `Bearer ${store.state.token}`,\n    // },\n  });\n\n//获取用户基本资料\nexport const getUserProfileApi = () =>\n  request({\n    url: \"/v1_0/user/profile\",\n    method: \"get\",\n  });\n\n//更新用户基本资料\nexport const updataUserProfileApi = (data) =>\n  request({\n    url: \"/v1_0/user/profile\",\n    method: \"patch\",\n    data,\n  });\n\n//更新用户头像\nexport const edituserinfoPhotoApi = (data) =>\n  request({\n    url: \"/v1_0/user/photo\",\n    method: \"patch\",\n    data,\n  });\n"],"names":["render","_vm","this","_c","_self","staticClass","$store","state","token","attrs","userinfo","photo","_v","_s","name","art_count","follow_count","fans_count","like_count","on","loginin","require","scopedSlots","_u","key","fn","proxy","loginout","_e","staticRenderFns","data","console","methods","confirm","title","then","removeItem","catch","component","getUserApi","request","url","method","getUserProfileApi","updataUserProfileApi","edituserinfoPhotoApi"],"sourceRoot":""}