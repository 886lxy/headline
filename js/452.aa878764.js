"use strict";(self["webpackChunktoutiao_a"]=self["webpackChunktoutiao_a"]||[]).push([[452],{5452:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("van-nav-bar",{staticClass:"page-nav-bar",attrs:{title:"登录","left-arrow":""}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{rules:t.userValidatorPhone,name:"手机号",placeholder:"手机号"},scopedSlots:t._u([{key:"left-icon",fn:function(){return[e("span",{staticClass:"toutiao toutiao-shouji"})]},proxy:!0}]),model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}}),e("van-field",{attrs:{rules:t.userValidatorCode,name:"验证码",placeholder:"验证码"},scopedSlots:t._u([{key:"left-icon",fn:function(){return[e("span",{staticClass:"toutiao toutiao-yanzhengma"})]},proxy:!0},{key:"button",fn:function(){return[e("van-button",{staticClass:"send-sms-btn",attrs:{round:"",size:"mini",type:"default"}},[t._v(" 获取验证码 ")])]},proxy:!0}]),model:{value:t.user.code,callback:function(e){t.$set(t.user,"code",e)},expression:"user.code"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"info","native-type":"submit"}},[t._v(" 登录 ")])],1)],1)],1)])},o=[],n=a(5369);const r=t=>(0,n.Z)({url:"/v1_0/authorizations",method:"post",data:t});var i=a(7247),u={data(){return{user:{mobile:"18678884464",code:"246810"},userValidatorPhone:[{required:!0,message:"请填写用户名"},{pattern:/^1[3|5|7|8]\d{9}$/,message:"请输入正确的手机号"}],userValidatorCode:[{required:!0,message:"请填写验证码"},{pattern:/^\d{6}$/,message:"请输入正确的验证码"}]}},methods:{async onSubmit(){this.$toast.loading({message:"登录中...",forbidClick:!0,duration:0});try{let{data:t}=await r(this.user);(0,i.LS)("REFRESH_TOKEN",t.data.refresh_token),this.$store.commit("setToken",t.data.token),this.$toast.success("登录成功"),this.$router.back()}catch(t){console.log(t),this.$toast.fail(t.response.data.message)}}}},l=u,c=a(1001),d=(0,c.Z)(l,s,o,!1,null,"44e7c476",null),m=d.exports}}]);
//# sourceMappingURL=452.aa878764.js.map