{"version":3,"file":"js/452.aa878764.js","mappings":"8JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,YAAY,eAAeC,MAAM,CAAC,MAAQ,KAAK,aAAa,MAAMH,EAAG,WAAW,CAACI,GAAG,CAAC,OAASN,EAAIO,WAAW,CAACL,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQL,EAAIQ,mBAAmB,KAAO,MAAM,YAAc,OAAOC,YAAYT,EAAIU,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,WAAW,MAAO,CAACV,EAAG,OAAO,CAACE,YAAY,2BAA2B,EAAES,OAAM,KAAQC,MAAM,CAACC,MAAOf,EAAIgB,KAAKC,OAAQC,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIgB,KAAM,SAAUG,EAAI,EAAEE,WAAW,iBAAiBnB,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQL,EAAIsB,kBAAkB,KAAO,MAAM,YAAc,OAAOb,YAAYT,EAAIU,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,WAAW,MAAO,CAACV,EAAG,OAAO,CAACE,YAAY,+BAA+B,EAAES,OAAM,GAAM,CAACF,IAAI,SAASC,GAAG,WAAW,MAAO,CAACV,EAAG,aAAa,CAACE,YAAY,eAAeC,MAAM,CAAC,MAAQ,GAAG,KAAO,OAAO,KAAO,YAAY,CAACL,EAAIuB,GAAG,aAAa,EAAEV,OAAM,KAAQC,MAAM,CAACC,MAAOf,EAAIgB,KAAKQ,KAAMN,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIgB,KAAM,OAAQG,EAAI,EAAEE,WAAW,eAAenB,EAAG,MAAM,CAACuB,YAAY,CAAC,OAAS,SAAS,CAACvB,EAAG,aAAa,CAACG,MAAM,CAAC,MAAQ,GAAG,KAAO,OAAO,cAAc,WAAW,CAACL,EAAIuB,GAAG,WAAW,IAAI,IAAI,IACjqC,EACIG,EAAkB,G,UCAf,MAAMC,EAAYC,IACvBC,EAAAA,EAAAA,GAAQ,CACNC,IAAK,uBACLC,OAAQ,OACRH,S,cCqCJ,GACAA,OACA,OACAZ,KAAAA,CACAC,OAAAA,cACAO,KAAAA,UAEAhB,mBAAAA,CACA,CAAAwB,UAAAA,EAAAC,QAAAA,UACA,CAAAC,QAAAA,oBAAAD,QAAAA,cAEAX,kBAAAA,CACA,CAAAU,UAAAA,EAAAC,QAAAA,UACA,CAAAC,QAAAA,UAAAD,QAAAA,cAGA,EACAE,QAAAA,CACA,iBAOA,qBACAF,QAAAA,SACAG,aAAAA,EACAC,SAAAA,IAKA,IACA,SAAAT,SAAA,cAGAU,EAAAA,EAAAA,IAAAA,gBAAAA,EAAAA,KAAAA,eACA,4CAEA,4BAGA,mBAMA,CALA,SAEAC,QAAAA,IAAAA,GAEA,yCACA,CASA,ICrGkQ,I,UCQ9PC,GAAY,OACd,EACAzC,EACA2B,GACA,EACA,KACA,WACA,MAIF,EAAec,EAAiB,O","sources":["webpack://toutiao-a/./src/views/login/LoginView.vue","webpack://toutiao-a/./src/api/login.js","webpack://toutiao-a/src/views/login/LoginView.vue","webpack://toutiao-a/./src/views/login/LoginView.vue?1da0","webpack://toutiao-a/./src/views/login/LoginView.vue?f970"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',[_c('van-nav-bar',{staticClass:\"page-nav-bar\",attrs:{\"title\":\"登录\",\"left-arrow\":\"\"}}),_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"rules\":_vm.userValidatorPhone,\"name\":\"手机号\",\"placeholder\":\"手机号\"},scopedSlots:_vm._u([{key:\"left-icon\",fn:function(){return [_c('span',{staticClass:\"toutiao toutiao-shouji\"})]},proxy:true}]),model:{value:(_vm.user.mobile),callback:function ($$v) {_vm.$set(_vm.user, \"mobile\", $$v)},expression:\"user.mobile\"}}),_c('van-field',{attrs:{\"rules\":_vm.userValidatorCode,\"name\":\"验证码\",\"placeholder\":\"验证码\"},scopedSlots:_vm._u([{key:\"left-icon\",fn:function(){return [_c('span',{staticClass:\"toutiao toutiao-yanzhengma\"})]},proxy:true},{key:\"button\",fn:function(){return [_c('van-button',{staticClass:\"send-sms-btn\",attrs:{\"round\":\"\",\"size\":\"mini\",\"type\":\"default\"}},[_vm._v(\" 获取验证码 \")])]},proxy:true}]),model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", $$v)},expression:\"user.code\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\" 登录 \")])],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from \"@/utils/request\";\n\nexport const loginApi = (data) =>\n  request({\n    url: \"/v1_0/authorizations\",\n    method: \"post\",\n    data,\n  });\n","<template>\n  <div>\n    <div>\n      <van-nav-bar class=\"page-nav-bar\" title=\"登录\" left-arrow />\n\n      <van-form @submit=\"onSubmit\">\n        <!-- 思考：在组件里插入不同的dom元素 -->\n        <!-- vant已经告诉我们插槽的名字 -->\n        <van-field\n          v-model=\"user.mobile\"\n          :rules=\"userValidatorPhone\"\n          name=\"手机号\"\n          placeholder=\"手机号\"\n        >\n          <template #left-icon>\n            <span class=\"toutiao toutiao-shouji\"></span>\n          </template>\n        </van-field>\n        <van-field\n          v-model=\"user.code\"\n          :rules=\"userValidatorCode\"\n          name=\"验证码\"\n          placeholder=\"验证码\"\n        >\n          <template #left-icon>\n            <span class=\"toutiao toutiao-yanzhengma\"></span>\n          </template>\n          <template #button>\n            <van-button class=\"send-sms-btn\" round size=\"mini\" type=\"default\">\n              获取验证码\n            </van-button>\n          </template>\n        </van-field>\n        <div style=\"margin: 16px\">\n          <van-button block type=\"info\" native-type=\"submit\"> 登录 </van-button>\n        </div>\n      </van-form>\n    </div>\n  </div>\n</template>\n<script>\nimport { loginApi } from \"@/api/login\";\nimport { setItem } from \"@/utils/storage\";\nexport default {\n  data() {\n    return {\n      user: {\n        mobile: \"18678884464\",\n        code: \"246810\",\n      },\n      userValidatorPhone: [\n        { required: true, message: \"请填写用户名\" },\n        { pattern: /^1[3|5|7|8]\\d{9}$/, message: \"请输入正确的手机号\" },\n      ],\n      userValidatorCode: [\n        { required: true, message: \"请填写验证码\" },\n        { pattern: /^\\d{6}$/, message: \"请输入正确的验证码\" },\n      ],\n    };\n  },\n  methods: {\n    async onSubmit() {\n      //登录状态的处理\n      //思考：用户怎么才能知道是不是登录中呢？\n      //解决：加一个轻提示\n\n      //思考：轻提示要一直开着！什么时候关闭呢？\n      //解决：成功或失败，给他另外一个提示：如：登录成功了，或，登录失败\n      this.$toast.loading({\n        message: \"登录中...\",\n        forbidClick: true, //是否禁止背景点击，也同时能解决防抖截流，阻止用户多次点击登录\n        duration: 0, //展示时长(ms)，值为 0 时，toast 不会消失\n      });\n      //一直在转圈的loading去哪了？\n      // Toast 默认采用单例模式，即同一时间只会存在一个 Toast。打开新的，先前的就会关闭掉\n      //try chtch捕获js代码异常的标准写法，也包括了异步请求的失败处理\n      try {\n        let { data } = await loginApi(this.user);\n        // console.log(data.data.token);\n        // localStorage.setItem(键, 值);\n        setItem(\"REFRESH_TOKEN\", data.data.refresh_token);\n        this.$store.commit(\"setToken\", data.data.token);\n        // setItem（键，值）\n        this.$toast.success(\"登录成功\");\n        //登录成功后返回到上一级页面\n        // back()回退\n        this.$router.back();\n      } catch (error) {\n        // error包含接口返回的错误信息\n        console.log(error);\n        //登录失败的原因给用户提示出来\n        this.$toast.fail(error.response.data.message);\n      }\n      // loginApi(this.user)\n      //   .then(() => {\n      //     //正确的代码\n      //   })\n      //   .catch(() => {\n      //     //接口请求失败的代码\n      //   });\n      //async和await：node第9天的课程\n    },\n  },\n};\n</script>\n<style scoped>\n.toutiao {\n  font-size: 37px;\n}\n.send-sms-btn {\n  width: 152px;\n  height: 46px;\n  line-height: 46px;\n  background-color: #ededed;\n  font-size: 22px;\n  color: #666;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LoginView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LoginView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginView.vue?vue&type=template&id=44e7c476&scoped=true&\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LoginView.vue?vue&type=style&index=0&id=44e7c476&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44e7c476\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","onSubmit","userValidatorPhone","scopedSlots","_u","key","fn","proxy","model","value","user","mobile","callback","$$v","$set","expression","userValidatorCode","_v","code","staticStyle","staticRenderFns","loginApi","data","request","url","method","required","message","pattern","methods","forbidClick","duration","setItem","console","component"],"sourceRoot":""}